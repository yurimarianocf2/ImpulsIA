
> farmabot-pro-dashboard@0.1.0 dev
> node -r dotenv/config node_modules/next/dist/bin/next dev

  ‚ñ≤ Next.js 14.2.30
  - Local:        http://localhost:3000
  - Environments: .env.local

 ‚úì Starting...
 ‚úì Ready in 19.6s
 ‚óã Compiling /api/price-analysis ...
 ‚úì Compiled / in 2.3s (330 modules)
 ‚úì Compiled in 16.7s (721 modules)
‚ùå Erro na an√°lise de pre√ßos: SyntaxError: Unexpected end of JSON input
    at JSON.parse (<anonymous>)
    at parseJSONFromBytes (node:internal/deps/undici/undici:5738:19)
    at successSteps (node:internal/deps/undici/undici:5719:27)
    at consumeBody (node:internal/deps/undici/undici:5725:9)
    at NextRequest.json (node:internal/deps/undici/undici:5665:18)
    at POST (webpack-internal:///(rsc)/./src/app/api/price-analysis/route.ts:12:68)
    at /mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57234
    at /mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/lib/trace/tracer.js:140:36
    at NoopContextManager.with (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/@opentelemetry/api/build/src/context/NoopContextManager.js:25:19)
    at ContextAPI.with (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/@opentelemetry/api/build/src/api/context.js:60:46)
    at NoopTracer.startActiveSpan (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/@opentelemetry/api/build/src/trace/NoopTracer.js:65:31)
    at ProxyTracer.startActiveSpan (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/@opentelemetry/api/build/src/trace/ProxyTracer.js:36:24)
    at /mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/lib/trace/tracer.js:122:103
    at NoopContextManager.with (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/@opentelemetry/api/build/src/context/NoopContextManager.js:25:19)
    at ContextAPI.with (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/@opentelemetry/api/build/src/api/context.js:60:46)
    at NextTracerImpl.trace (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/lib/trace/tracer.js:122:28)
    at /mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:48896
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at Object.wrap (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:40958)
    at /mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:47472
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at Object.wrap (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:38293)
    at /mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:47434
    at AsyncLocalStorage.run (node:internal/async_local_storage/async_hooks:91:14)
    at eT.execute (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46881)
    at eT.handle (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58771)
    at doRender (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/base-server.js:1366:60)
    at cacheEntry.responseCache.get.routeKind (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/base-server.js:1588:34)
    at ResponseCache.get (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/response-cache/index.js:49:26)
    at DevServer.renderToResponseWithComponentsImpl (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/base-server.js:1496:53)
üîç Analisando pre√ßos para "dipirona" na farm√°cia 550e8400-e29b-41d4-a716-446655440000
 GET / 200 in 2900ms
 POST /api/price-analysis 200 in 2896ms
 ‚úì Compiled in 1590ms (721 modules)
üîç Buscando "dipirona" na farm√°cia 550e8400-e29b-41d4-a716-446655440000 na tabela produtos
Erro ao buscar produto: {
  code: 'PGRST116',
  details: 'The result contains 0 rows',
  hint: null,
  message: 'JSON object requested, multiple (or no) rows returned'
}
Erro na busca local: Error: Produto "dipirona" n√£o encontrado no estoque da farm√°cia
    at PriceAnalyzer.buscarProdutoLocal (webpack-internal:///(rsc)/./src/lib/price-analyzer.ts:29:23)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async PriceAnalyzer.analisarPrecos (webpack-internal:///(rsc)/./src/lib/price-analyzer.ts:88:30)
    at async POST (webpack-internal:///(rsc)/./src/app/api/price-analysis/route.ts:25:25)
    at async /mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/base-server.js:818:17)
    at async /mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/lib/start-server.js:141:13)
‚ùå Erro na an√°lise de pre√ßos: Error: Produto "dipirona" n√£o encontrado no estoque da farm√°cia
    at PriceAnalyzer.buscarProdutoLocal (webpack-internal:///(rsc)/./src/lib/price-analyzer.ts:44:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async PriceAnalyzer.analisarPrecos (webpack-internal:///(rsc)/./src/lib/price-analyzer.ts:88:30)
    at async POST (webpack-internal:///(rsc)/./src/app/api/price-analysis/route.ts:25:25)
    at async /mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/base-server.js:818:17)
    at async /mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/lib/router-server.js:179:21)
    at async handleRequest (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/lib/router-server.js:359:24)
    at async requestHandlerImpl (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/lib/router-server.js:383:13)
    at async Server.requestListener (/mnt/f/Yuri/Instagram/Landing Page Mirella/mariano/node_modules/next/dist/server/lib/start-server.js:141:13)
 GET / 200 in 91ms
 ‚úì Compiled /api/expiring-products in 462ms (897 modules)
Tabela medicamentos n√£o existe, tentando produtos...
 GET /api/expiring-products?farmacia_id=550e8400-e29b-41d4-a716-446655440001 200 in 1326ms
Tabela medicamentos n√£o existe, tentando produtos...
 GET /api/expiring-products?farmacia_id=550e8400-e29b-41d4-a716-446655440001 200 in 226ms
 ‚úì Compiled /api/price-analysis in 324ms (1025 modules)
üîç Analisando pre√ßos para "dipirona" na farm√°cia 550e8400-e29b-41d4-a716-446655440001
üîç Buscando "dipirona" na farm√°cia 550e8400-e29b-41d4-a716-446655440001 na tabela produtos
‚úÖ Produto encontrado: Dipirona S√≥dica 500mg - R$ 8.9
‚úÖ Produto encontrado: Dipirona S√≥dica 500mg - R$ 8.9
EXA encontrou 2 resultados para Dipirona S√≥dica 500mg
üìä Encontrados 6 pre√ßos externos
‚úÖ An√°lise salva no banco de dados
‚úÖ An√°lise conclu√≠da para Dipirona S√≥dica 500mg
 POST /api/price-analysis 200 in 7789ms
